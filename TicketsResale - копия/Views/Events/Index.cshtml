@inject Microsoft.AspNetCore.Mvc.Localization.IViewLocalizer localizer
@model EventsViewModel
@using TicketsResale.Business.Models;

@{ object options = new
                {
                    showEventUrl = Url.Action("GetEventTickets", "Tickets"),
                    removeEventUrl = Url.Action("RemoveEvent", "Events"),
                    userInAdminRole = User.IsInRole("Administrator").ToString().ToLower()
                }; }

<h1>@localizer["Events"]</h1>

<div class="container-fluid">
    <ul class="nav nav-pills">
        <li class="nav-item" style="padding-right: 20px">
            @localizer["Category"]
            <select id="category" multiple class="selectpicker">
                @foreach (var category in Model.EventsCategories)
                {
                    <option value="@category.Id">@category.Name</option>
                }
            </select>
        </li>
        <li class="nav-item" style="padding-right: 20px">
            @localizer["City"]
            <select id="city" multiple class="selectpicker">
                @foreach (var city in Model.Cities)
                {
                    <option value="@city.Id">@city.Name</option>
                }
            </select>
        </li>
        <li class="nav-item" style="padding-right: 20px">
            @localizer["Venue"]
            <select id="venue" multiple class="selectpicker">
            </select>
        </li>
    </ul>
    <ul class="nav nav-pills">
        <li class="nav-item">
            <a class="nav-item nav-link active text-light btn-secondary" asp-action="CreateTicket" asp-controller="Tickets">
                Create new ticket
            </a>
        </li>

        <div class="col-md-3 mb-1 text-left">
            <label>@localizer["DateFrom"]</label>
            @Html.TextBoxFor(m => m.DateFrom, new { type = "date", id = "dateFrom", @class = "form-control d-inline" })
        </div>
        <div class="col-md-3 mb-1 text-left">
            <label>@localizer["DateTo"]</label>
            @Html.TextBoxFor(m => m.DateTo, new { type = "date", id = "dateTo", @class = "form-control d-inline" })
        </div>
        <div class="col-md-2 mb-1 text-left">
            <label>@localizer["SortBy"]</label>
            <select id="sortBy" class="form-control d-inline" asp-items="Html.GetEnumSelectList<SortParams>()"></select>
        </div>
        <div class="col-md-2 text-left">
            <label>@localizer["SortOrder"]</label>
            <select id="sortOrder" class="form-control d-inline" asp-items="Html.GetEnumSelectList<SortOrder>()"></select>
        </div>
        <div class="col-md-2 mb-1 text-left">
            <label>@localizer["PageSize"]</label>
            @Html.DropDownListFor(m => m.PageSize, new SelectList(PagesSizes.Sizes), new { id = "pageSize", @class = "form-control d-inline" })
        </div>

    </ul>
    <p> </p>
    <div id="eventItems" class="row row-cols-2">
    </div>
    <nav aria-label="...">
        <ul class="pagination justify-content-center">
        </ul>
    </nav>
</div>

@section Scripts
{
    <script>
        const props = @Html.Raw(Json.Serialize(options));
    </script>
    <script src="dist/store.entry.js" type="module" defer></script>
}


